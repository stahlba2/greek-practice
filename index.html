<!DOCTYPE html>
<html>

<head>
    <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0, minimum-scale=1.0">
    <link rel="stylesheet"
          href="https://fonts.googleapis.com/css?family=Noto+Sans+Display">
    <script>
        window.options = [
            { word: 'ἂγγελος', def: 'angel; messenger', chapter: 4 },
            { word: 'ἀμήν', def: 'amen', chapter: 4 },
            { word: 'ἂνθρωπος', def: 'man', chapter: 4 },
            { word: 'ἀπόστολος', def: 'apostle; envoy; messenger', chapter: 4 },
            { word: 'Γαλιλαία', def: 'Galilee', chapter: 4 },
            { word: 'γραφή', def: 'writing; Scripture', chapter: 4 },
            { word: 'δὀχα', def: 'glory; majesty; fame', chapter: 4 },
            { word: 'ἐγώ', def: 'I', chapter: 4 },
            { word: 'ἒσχατος', def: 'last', chapter: 4 },
            { word: 'ζωή', def: 'life; soul', chapter: 4 },
            { word: 'θεός', def: 'God; a god', chapter: 4 },
            { word: 'καί', def: 'and; even; also; namely', chapter: 4 },
            { word: 'καρδία', def: 'heart; inner self', chapter: 4 },
            { word: 'λόγος', def: 'word; Word; statement; message', chapter: 4 },
            { word: 'πνεῦμα', def: 'spirit; Spirit; wind; breath; inner life', chapter: 4 },
            { word: 'προφήτης', def: 'prophet', chapter: 4 },
            { word: 'σἀββατον', def: 'sabbath; week', chapter: 4 },
            { word: 'φωνή', def: 'sound; voice; noise', chapter: 4 },
            { word: 'Χριστός', def: 'Christ; Messaiah; Annointed one', chapter: 4 },
            { word: 'Ἀβραάμ', def: 'Abraham', chapter: 4 },
            { word: 'Δαυίδ', def: 'David', chapter: 4 },
            { word: 'Παύλος', def: 'Paul', chapter: 4 },
            { word: 'Πέτρος', def: 'Peter', chapter: 4 },
            { word: 'Πιλᾶτος', def: 'Pilate', chapter: 4 },
            { word: 'Ζίμων', def: 'Simon', chapter: 4 },
            { word: 'ἀγάπη', def: 'love', chapter: 6 },
            { word: 'ἂλλος', def: 'other; another', chapter: 6 },
            { word: 'αύτός', def: 'he; she; it; him; her; they; them', chapter: 6 },
            { word: 'βασιλεία', def: 'kingdom', chapter: 6 },
            { word: 'δἐ', def: 'but; and', chapter: 6 },
            { word: 'ἐν', def: 'in; on; among', chapter: 6 },
            { word: 'ἒργον', def: 'work; deed; action', chapter: 6 },
            { word: 'καιρός', def: 'time; season', chapter: 6 },
            { word: 'νῦν', def: 'now', chapter: 6 },
            { word: 'ὁ', def: 'the', chapter: 6 },
            { word: 'ἡ', def: 'the', chapter: 6 },
            { word: 'τό', def: 'the', chapter: 6 },
            { word: 'ὅτι', def: 'that; since; because; ""', chapter: 6 },
            { word: 'οὐ', def: 'not', chapter: 6 },
            { word: 'ὥρα', def: 'hour; occassion; moment', chapter: 6 },
            { word: 'ἀμαρτία', def: 'sin', chapter: 7 },
            { word: 'ἀρχή', def: 'beginning; ruler', chapter: 7 },
            { word: 'γάρ', def: 'for; then', chapter: 7 },
            { word: 'εἶπεν', def: 'he/she/it said; he said; she said; it said', chapter: 7 },
            { word: 'εἰς', def: 'into; in', chapter: 7 },
            { word: 'ἐξουσία', def: 'authority; power', chapter: 7 },
            { word: 'εὑαγγέλιον', def: 'Gospel; good news', chapter: 7 },
            { word: 'Ἰησοῦς', def: 'Jesus; Joshua', chapter: 7 },
            { word: 'κὐριος', def: 'Lord; lord; master; sir', chapter: 7 },
            { word: 'μή', def: 'not; lest', chapter: 7 },
            { word: 'οὐρανός', def: 'heaven; sky', chapter: 7 },
            { word: 'οὗτος', def: 'this; these', chapter: 7 },
            { word: 'αὓτη', def: 'this; these', chapter: 7 },
            { word: 'τοῦτο', def: 'this; these', chapter: 7 },
            { word: 'σύ', def: 'thou; you', chapter: 7 },
            { word: 'υἱός', def: 'son; descendant', chapter: 7 },
            { word: 'ὢστε', def: 'therefore; so that', chapter: 7 },
            { word: 'ἀλλά', def: 'but; yet; rather', chapter: 8 },
            { word: 'ἀπό (genative)', def: 'from', chapter: 8 },
            { word: 'διἀ (genative)', def: 'through', chapter: 8 },
            { word: 'διἀ (accusative)', def: 'on account of', chapter: 8 },
            { word: 'εἰμί', def: 'I am; exist; live; am present', chapter: 8 },
            { word: 'ἐκ', def: 'from; out of', chapter: 8 },
            { word: 'έξ', def: 'from; out of', chapter: 8 },
            { word: 'ἡμέρα', def: 'day', chapter: 8 },
            { word: 'ἧν', def: 'he/she/it was', chapter: 8 },
            { word: 'θάλλασσα', def: 'sea; lake', chapter: 8 },
            { word: 'θἀνατος', def: 'death', chapter: 8 },
            { word: 'ἳνα', def: 'in order that; that; so that', chapter: 8 },
            { word: 'Ἰωάννης', def: 'John', chapter: 8 },
            { word: 'λέγω', def: 'I speak', chapter: 8 },
            { word: 'μετά (genative)', def: 'with', chapter: 8 },
            { word: 'μετά (accusative)', def: 'after', chapter: 8 },
            { word: 'οἰκία', def: 'house', chapter: 8 },
            { word: 'οἶκος', def: 'house', chapter: 8 },
            { word: 'ὂχλος', def: 'crowd; multitude', chapter: 8 },
            { word: 'παρά (genative)', def: 'from', chapter: 8 },
            { word: 'παρά (dative)', def: 'beside; in the presence of', chapter: 8 },
            { word: 'παρά (accusative)', def: 'alongside of', chapter: 8 },
            { word: 'παραβολή', def: 'parable', chapter: 8 },
            { word: 'πρός', def: 'to; towards; with', chapter: 8 },
            { word: 'ὑπό (genative)', def: 'by', chapter: 8 },
            { word: 'ὑπό (accusative)', def: 'under', chapter: 8 },
            { word: 'ἀγαθός', def: 'good; useful', chapter: 9 },
            { word: 'ἀγαπητός', def: 'beloved', chapter: 9 },
            { word: 'ἂγιος', def: 'holy; saints', chapter: 9 },
            { word: 'αἰώνιος', def: 'eternal', chapter: 9 },
            { word: 'άλλήλων', def: 'one another', chapter: 9 },
            { word: 'ἀπεκρίθη', def: 'he/she/it answered', chapter: 9 },
            { word: 'δοῦλος', def: 'slave; servant', chapter: 9 },
            { word: 'ἐάν', def: 'if; when', chapter: 9 },
            { word: 'ἐμός', def: 'my', chapter: 9 },
            { word: 'ἐμή', def: 'my', chapter: 9 },
            { word: 'ἐμόν', def: 'my', chapter: 9 },
            { word: 'ἐντολή', def: 'commandment', chapter: 9 },
            { word: 'καθώς', def: 'as; even as', chapter: 9 },
            { word: 'κακός', def: 'bad; evil', chapter: 9 },
            { word: 'μου', def: 'my', chapter: 9 },
            { word: 'νεκρός', def: 'dead', chapter: 9 },
            { word: 'πιστός', def: 'faithful; believers', chapter: 9 },
            { word: 'πονηρός', def: 'evil', chapter: 9 },
            { word: 'πρῶτος', def: 'first', chapter: 9 },
            { word: 'τρίτος', def: 'third', chapter: 9 },
            { word: 'εἰ', def: 'if', chapter: 10},
            { word: 'εἰ μή', def: 'except; if not', chapter: 10},
            { word: 'εἷς', def: 'one', chapter: 10},
            { word: 'μία', def: 'one', chapter: 10},
            { word: 'ἔν', def: 'one', chapter: 10},
            { word: 'ἤδη', def: 'now; already', chapter: 10},
            { word: 'ὄναμα, ατος, τό', def: 'name; reputation', chapter: 10},
            { word: 'οὐδείς', def: 'none; nothing; no one', chapter: 10},
            { word: 'οὐδεμία', def: 'none; nothing; no one', chapter: 10},
            { word: 'οὐδέν', def: 'none; nothing; no one', chapter: 10},
            { word: 'πᾶς', def: 'each; every; all', chapter: 10},
            { word: 'πᾶσα', def: 'each; every; all', chapter: 10},
            { word: 'πᾶν', def: 'each; every; all', chapter: 10},
            { word: 'περί (gen)', def: 'concerning; about', chapter: 10},
            { word: 'περί (acc)', def: 'around', chapter: 10},
            { word: 'σάρξ, σαρκός, τό', def: 'flesh; body', chapter: 10},
            { word: 'σύν (dat)', def: 'with', chapter: 10},
            { word: 'σῶμα, ατος, τό', def: 'body', chapter: 10},
            { word: 'τέκνον, οθ, τό', def: 'child; descendant', chapter: 10},
            { word: 'τίς', def: 'who?; what?; which?; why?', chapter: 10},
            { word: 'τί', def: 'who?; what?; which?; why?', chapter: 10},
            { word: 'τις', def: 'someone; something; certain one; certain thing; anyone; anything', chapter: 10},
            { word: 'τι', def: 'someone; something; certain one; certain thing; anyone; anything', chapter: 10},
            { word: 'ἀδελφὀς', def: 'brother', chapter: 11},
            { word: 'ἂν', def: 'uncertainty; -ever', chapter: 11},
            { word: 'ἀνήρ, ἀνδρός', def: 'male; husband; man', chapter: 11},
            { word: 'ἐκκλησία', def: 'church; assembly', chapter: 11},
            { word: 'ἐλπίς', def: 'hope; expectation', chapter: 11},
            { word: 'ἒχω (adverb)', def: 'without', chapter: 11},
            { word: 'ἒχω (preposition, gen)', def: 'outside', chapter: 11},
            { word: 'ἐπί (gen)', def: 'on; over; when', chapter: 11},
            { word: 'ἐπί (dat)', def: 'on the basis of; at', chapter: 11},
            { word: 'ἐπί (acc)', def: 'on; to; against', chapter: 11},
            { word: 'ἠμεῖς', def: 'we', chapter: 11},
            { word: 'θέλημα, θελήματος', def: 'will; desire', chapter: 11},
            { word: 'ἲδε', def: 'See!; Behold!', chapter: 11},
            { word: 'ἰδού', def: 'See!; Behold!', chapter: 11},
            { word: 'καλός', def: 'good; beautiful', chapter: 11},
            { word: 'μήτηρ, μητρός', def: 'mother', chapter: 11},
            { word: 'οὐδέ', def: 'and not; not even; neither', chapter: 11},
            { word: 'πατήρ, πατρός', def: 'father', chapter: 11},
            { word: 'πίστις, πίστεως', def: 'faith; belief; trust; teaching', chapter: 11},
            { word: 'ὒδωρ, ὒδατος', def: 'water', chapter: 11},
            { word: 'ὐμεις', def: 'you', chapter: 11},
            { word: 'φῶς. φωτός', def: 'light', chapter: 11},
            { word: 'χάρις, χαρίτος', def: 'grace; favor; kindness', chapter: 11},
            { word: 'ὧδε', def: 'here', chapter: 11},
            { word: 'αἰών', def: 'age; eternity', chapter: 12},
            { word: 'διδάσκαλος', def: 'teacher', chapter: 12},
            { word: 'εὐθύς', def: 'immediately', chapter: 12},
            { word: 'ἕως (adverb)', def: 'until', chapter: 12},
            { word: 'ἕως (gen)', def: 'as far as', chapter: 12},
            { word: 'μαθητής', def: 'disciple', chapter: 12},
            { word: 'μέν', def: 'on the one hand; indeed', chapter: 12},
            { word: 'μηδείς, μηδεμία, μηδέν', def: 'no one; no thing', chapter: 12},
            { word: 'μόνος', def: 'alone; only', chapter: 12},
            { word: 'ὅπως', def: 'how; that; (in order) that', chapter: 12},
            { word: 'ὅσος', def: 'as great as; as many as', chapter: 12},
            { word: 'οὗν', def: 'therefore; accordingly; then', chapter: 12},
            { word: 'ὁφθαλμός', def: 'eye; sight', chapter: 12},
            { word: 'πάλιν', def: 'again', chapter: 12},
            { word: 'πούς, ποδός, ό', def: 'foot', chapter: 12},
            { word: 'ὐπέρ (gen)', def: 'in behalf of', chapter: 12},
            { word: 'ὐπέρ (acc)', def: 'above', chapter: 12},
            { word: 'γυνή, γυναικός, ή', def: '', chapter: 13},
            { word: 'δικαιοσύνη', def: 'righteousness', chapter: 13},
            { word: 'δώδεκα', def: 'twelve', chapter: 13},
            { word: 'ἑαυτοῦ, ῆς, οῦ', def: 'himself; herself; itself; themselves', chapter: 13},
            { word: 'ἐκεῖνος, η, ο', def: 'that man; that woman; that thing; these men; these women; these things', chapter: 13},
            { word: 'ἤ', def: 'or; than', chapter: 13},
            { word: 'κἀγώ', def: 'and I; but I', chapter: 13},
            { word: 'μακάριος', def: 'blessed; happy', chapter: 13},
            { word: 'μἐγας, μεγάλη, μἐγα', def: 'large; great', chapter: 13},
            { word: 'πὀλις, εως, ἡ', def: 'city; town', chapter: 13},
            { word: 'πὀλύς, πολλή, πολύ', def: 'much; many', chapter: 13},
            { word: 'πὀλύς, πολλή, πολύ (adverb)', def: 'often', chapter: 13},
            { word: 'πῶς', def: 'how?', chapter: 13},
            { word: 'σημεῖον', def: 'sign; miracle', chapter: 13},
            { word: 'οὗτος', def: 'this man; these men', chapter: 13},
            { word: 'αὕτη', def: 'this woman; these women', chapter: 13},
            { word: 'τοῦτο', def: 'this thing; these things', chapter: 13},

            // { word: '', def: '', chapter: 13},

        ];
    </script>
    <style>
        .meta-grid {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            padding-bottom: 10px;
        }

        .options {
            display: grid;
            grid-template-columns: 1fr;
            grid-row-gap: 10px;
        }

        .card {
            box-shadow: inset;
        }
        .skip {
            margin-top: 40px;
        }
        .skip button {
            border: 1px solid black;
            background-color: #dedede;
            border-radius: 4px;
            padding: 5px 10px;
            cursor: pointer;
            font-size: 24px;
        }
        .game-area {
            padding: 0 20px;
            margin: 0 auto;
            max-width: 1000px;
        }
        input {
            font-size: 18px;
            padding: 8px;
        }
        .game-area-box {
            display: grid;
            grid-template-columns: 2fr 1fr;
            grid-column-gap: 8px;
        }
        .prev-info-box {
            background-color: #dedede;
            padding: 8px;
            border-radius: 8px;
        }
        .options,
        .prev-info-box {
            padding: 8px 0;
        }
        #previous-info {
            padding: 0 8px;
        }
        .prev-info-box.correct {
            background-color: #8f8;
        }
        .prev-info-box.incorrect {
            background-color: #f88;
        }
        .game-stat {
            font-size: 24px;
        }
        .game-stat:last-child {
            text-align: right;
        }
        .chapter-container {
            text-align: center;
        }
        .chapter-container select {
            font-size: 24px;
        }
        * {
            font-family: 'Noto Sans Display';
        }
        h1 {
            font-weight: normal;
            font-size: 48px;
            margin: 0;
        }
        body {
            margin: 0;
        }
        @media only screen and (max-width: 800px) {
            body .game-area {
                max-width: 100%;
            }
            body .game-area-box {
                grid-template-columns: 1fr;
                grid-row-gap: 20px;
            }
            body .skip {
                margin-top: 10px;
            }
            .error {
                margin: 5px 0;
            }
        }
        
    </style>
</head>

<body>
    <div class="game-area">
        <div class="meta-grid">
            <div class="game-stat" id="triesstat"></div>
            <div class="chapter-container">
                <select id="chapter"></select>
            </div>
            <div class="game-stat" id="correctstat"></div>
        </div>
        <div class="game-area-box">
            <div class="options">
                <div class="card">
                    <h1 id="question"></h1>
                    <p id="error"></p>
                </div>
                <div class="card">
                        <input id="answer" placeholder="Answer..." type="text" />
                </div>
                <div class="skip">
                    <button type="button" id="skipBtn">Skip</button>
                </div>
            </div>
            <div class="prev-info-box">
                <div id="previous-info"></div>
            </div>
        </div>
    </div>

    <script>
        (function () {
            const chapter = document.querySelector('#chapter');
            const question = document.querySelector('#question');
            const answer = document.querySelector('#answer');
            const error = document.querySelector('#error');
            const correctStat = document.querySelector('#correctstat');
            const triesStat = document.querySelector('#triesstat');
            const skipBtn = document.querySelector('#skipBtn');
            const previousInfo = document.querySelector('#previous-info');
            const previousInfoBox = document.querySelector('.prev-info-box');
            let possibilities = window.options.slice();
            let currentAnswer = undefined;
            let correctInRow = 0;
            let tries = 0;
            const allChaptersValue = -1;
            let selectedChapter = -1;

            const allChapters = possibilities.reduce((prev, next) => {
                prev[next.chapter] = `Chapter ${next.chapter}`;
                return prev;
            }, {[allChaptersValue]: 'All Chapters'});
            Object.keys(allChapters).sort((a, b) => a - b).forEach(x => {
                const option = document.createElement('option');
                option.value = x;
                option.textContent = allChapters[x];
                chapter.appendChild(option);
            });

            const setPrevInfo = (prev) => {
                previousInfoBox.style.display = prev ? null : 'none';
                previousInfo.innerHTML = prev ? `
                    <h1>${prev.word}</h1>
                    ${prev.def.split(';').map(y => `<p>${y.trim()}</p>`).join('')}` : '';
            }
            const setQuestion = () => {
                error.textContent = '';
                answer.value = '';
                setPrevInfo(currentAnswer);
                let options = possibilities;
                currentAnswer = options[Math.floor(Math.random() * options.length)]
                question.textContent = currentAnswer.word;

            };
            const setStatsUi = () => {
                correctStat.textContent = 'Correct: ' + correctInRow.toString();
                triesStat.textContent = 'Attempts: ' + tries.toString();
            };

            const resetPosibillities = () => {
                possibilities = window.options.slice().filter(x => x.chapter === selectedChapter || selectedChapter === allChaptersValue);
            }

            const setTries = (val) => {
                tries = val;;
            }

            const setInRow = (val) => {
                correctInRow = val;
            }

            const resetUi = () =>{ 
                setInRow(0);
                setTries(0);
                previousInfoBox.classList.remove('correct');
                previousInfoBox.classList.add('incorrect');
                setQuestion();
                setStatsUi();
                answer.focus();
            }
            
            resetPosibillities();
            setQuestion();
            setStatsUi();

            chapter.onchange = () => {
                selectedChapter = parseInt(chapter.value);
                resetPosibillities();
                resetUi();
            };

            answer.onchange = () => {
                const a = answer.value.toLowerCase().trim();
                const possible = currentAnswer.def.split(';').map(x => x.toLowerCase().trim());
                if (possible.includes(a)) {
                    if (tries === 0 && currentAnswer) {
                        possibilities.splice(possibilities.indexOf(currentAnswer), 1); 
                    }
                    if (possibilities.length === 0) {
                        resetPosibillities();
                    }
                    setInRow(correctInRow + 1);
                    setTries(0);
                    setQuestion();
                    previousInfoBox.classList.remove('incorrect');
                    previousInfoBox.classList.add('correct');
                } else {
                    setInRow(0);
                    setTries(tries + 1);
                    error.textContent = 'Incorrect';
                    answer.value = '';
                }
                setStatsUi();
            }
            skipBtn.onclick = () => {
                resetUi();
            };

            

            answer.focus();
        }());   
    </script>
</body>

</html>
